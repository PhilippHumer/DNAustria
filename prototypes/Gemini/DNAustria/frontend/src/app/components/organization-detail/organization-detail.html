<div class="container p-4">
  <mat-card>
    <mat-card-header>
      <mat-card-title>{{ isEditMode ? 'Edit Organization' : 'Create Organization' }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="organizationForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-4 mt-4">
        
        <mat-form-field appearance="fill">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" placeholder="Organization Name">
          <mat-error *ngIf="organizationForm.get('name')?.hasError('required')">
            Name is required
          </mat-error>
        </mat-form-field>

        <div formGroupName="address" class="flex flex-col gap-4 border p-4 rounded">
          <h3 class="font-bold">Address</h3>
          
          <mat-form-field appearance="fill">
            <mat-label>Location Name</mat-label>
            <input matInput formControlName="locationName" placeholder="e.g. Main Office">
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Street</mat-label>
            <input matInput formControlName="street" placeholder="Street Address">
            <mat-error *ngIf="organizationForm.get('address.street')?.hasError('required')">
              Street is required
            </mat-error>
          </mat-form-field>

          <div class="flex gap-4">
            <mat-form-field appearance="fill" class="w-1/3">
              <mat-label>ZIP</mat-label>
              <input matInput formControlName="zip" placeholder="ZIP Code">
              <mat-error *ngIf="organizationForm.get('address.zip')?.hasError('required')">
                ZIP is required
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="fill" class="w-2/3">
              <mat-label>City</mat-label>
              <input matInput formControlName="city" placeholder="City">
              <mat-error *ngIf="organizationForm.get('address.city')?.hasError('required')">
                City is required
              </mat-error>
            </mat-form-field>
          </div>

          <mat-form-field appearance="fill">
            <mat-label>Country</mat-label>
            <input matInput formControlName="country" placeholder="Country">
            <mat-error *ngIf="organizationForm.get('address.country')?.hasError('required')">
              Country is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="flex justify-end gap-2 mt-4">
          <button mat-button type="button" routerLink="/organizations">Cancel</button>
          <button mat-raised-button color="warn" type="button" *ngIf="isEditMode" (click)="deleteOrganization()">Delete</button>
          <button mat-raised-button color="primary" type="submit" [disabled]="organizationForm.invalid">Save</button>
        </div>

      </form>
    </mat-card-content>
  </mat-card>
</div>
